# 变量和可变性

该章节内容包括：Variables, Basic Data Types, Functions, Comments, Control Flow.

## 变量声明

声明方式如下：
```rust
let x = 5;
let mut x = 6;
```

变量的总结：
- 变量默认是不可变的，是为了程序更安全，避免无意识的值变化所的程序错误，而且可以更便于处理并发场景；
- 变量声明为不可变时，编译器会检查并确保该变量后续没有被变更过，因此开发人员不用自行检查并确认代码是否由于疏漏而被改变过
- 若变量需要可变，则需要手动增加mut标识

变量可变性的权衡：
- 对于比较大的数据结构，在适当的位置改变其内容，比起重新分配新的实例然后再拷贝和返回来说，前者更快一些
- 而对于比较小的数据结构，分配新的实例并在适当的函数中完成赋值则更容易理解和阅读
- 因此，变量可变性的权衡点就是性能

## 变量覆盖

可以在同一个作用域内，声明同样名称的变量，例如：
```rust
let x = 5;
let x = x+1;
let mut x = x*2;
let x = "abc";
```

覆盖的特点：
1. 后续声明的变量会覆盖前面的变量
2. 后续声明的变量可以重新指定类型以及可变性
3. 后续声明的变量所绑定的值可通过同名的前变量来获得

覆盖和MUT的区别：
1. mut变量是一直都可以直接改变值的，例如x=1;x=2;
2. 对于非mut的变量，不可以直接改变值，但加上let之后，就是重新声明同名变量；
3. 如果新声明的变量是非mut的，则重新声明之后仍然是不可改变的；

覆盖的最大意义是：更容易声明和使用变量，例如：

> 需要一个字符串类型的变量来接收用户的输入，但是，最后程序中我们需要将用户输入的字符串转为数字。因此，我们就可以使用同一个名称"number"，而不是"number_str"和"number_int"

## 常量

常量的声明：
```rust
const MAX : u32 = 999;
```

常量与变量的区别：
- 常量必须、只能、且默认是不可变的，但变量可通过mut来声明为可变的
- 声明的语法不同，使用关键字const
- 常量声明时候必须指明类型，编译器不会进行自动推导
- ==常量可以是一个表达式而不是一个值，这个表达式可能在运行时才能被计算出来==

常量的命名规范：
1. 全部使用大写
2. 使用'_'来进行单词之间的分隔
3. 可以使用'_'来代替数字表达中的','，从而更便于代码阅读，例如数字"100,000"可声明为常量如下：
```rust
const MAX_BALANCE: u32 = 100_000;
```

常量的作用域：
- 常量可以在任何作用域来声明
- 常量在所声明的作用域内，是一直可用的
> 例如，在应用程序域声明常量，则在整个应用程序的所有代码中都可以使用，比如一个游戏程序中所设定的最大奖励金额

常量的必要性：
- 将程序中需要硬编码的值作为常量是有必要的
- 这样确保代码未来更容易维护
- 且确保了只需变更一处代码即可更新该值
